-- MySQL dump 10.13  Distrib 8.0.43, for Linux (x86_64)
--
-- Host: localhost    Database: HOTELERIA
-- ------------------------------------------------------
-- Server version	8.0.43

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `CHECKIN`
--

DROP TABLE IF EXISTS `CHECKIN`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `CHECKIN` (
  `ID_CHECKIN` int NOT NULL AUTO_INCREMENT,
  `ID_RESERVA` int NOT NULL,
  `FECHA_HORA` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `OBSERVACION` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`ID_CHECKIN`),
  UNIQUE KEY `UQ_CHECKIN_RESERVA` (`ID_RESERVA`),
  CONSTRAINT `FK_CHECKIN_RESERVA` FOREIGN KEY (`ID_RESERVA`) REFERENCES `RESERVA` (`ID_RESERVA`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `CHECKIN`
--

LOCK TABLES `CHECKIN` WRITE;
/*!40000 ALTER TABLE `CHECKIN` DISABLE KEYS */;
INSERT INTO `CHECKIN` VALUES (1,1,'2025-09-03 22:31:18','Cliente llegó puntualmente');
/*!40000 ALTER TABLE `CHECKIN` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `CHECKOUT`
--

DROP TABLE IF EXISTS `CHECKOUT`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `CHECKOUT` (
  `ID_CHECKOUT` int NOT NULL AUTO_INCREMENT,
  `ID_RESERVA` int NOT NULL,
  `FECHA_HORA` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `CARGOS_EXTRA` decimal(10,2) NOT NULL DEFAULT '0.00',
  `OBSERVACION` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`ID_CHECKOUT`),
  UNIQUE KEY `UQ_CHECKOUT_RESERVA` (`ID_RESERVA`),
  CONSTRAINT `FK_CHECKOUT_RESERVA` FOREIGN KEY (`ID_RESERVA`) REFERENCES `RESERVA` (`ID_RESERVA`) ON DELETE CASCADE,
  CONSTRAINT `CHK_CHECKOUT_CARGOS` CHECK ((`CARGOS_EXTRA` >= 0))
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `CHECKOUT`
--

LOCK TABLES `CHECKOUT` WRITE;
/*!40000 ALTER TABLE `CHECKOUT` DISABLE KEYS */;
INSERT INTO `CHECKOUT` VALUES (1,1,'2025-09-03 22:31:18',0.00,'Sin cargos adicionales');
/*!40000 ALTER TABLE `CHECKOUT` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `CLIENTE`
--

DROP TABLE IF EXISTS `CLIENTE`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `CLIENTE` (
  `ID_CLIENTE` int NOT NULL AUTO_INCREMENT,
  `TIPO_DOCUMENTO` enum('CC','CE','TI','PP','OTRO') NOT NULL DEFAULT 'CC',
  `NUMERO_DOCUMENTO` varchar(30) NOT NULL,
  `NOMBRE` varchar(80) NOT NULL,
  `APELLIDO` varchar(80) NOT NULL,
  `CORREO` varchar(120) DEFAULT NULL,
  `TELEFONO` varchar(30) DEFAULT NULL,
  PRIMARY KEY (`ID_CLIENTE`),
  UNIQUE KEY `UQ_CLIENTE_DOC` (`TIPO_DOCUMENTO`,`NUMERO_DOCUMENTO`),
  UNIQUE KEY `UQ_CLIENTE_CORREO` (`CORREO`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `CLIENTE`
--

LOCK TABLES `CLIENTE` WRITE;
/*!40000 ALTER TABLE `CLIENTE` DISABLE KEYS */;
INSERT INTO `CLIENTE` VALUES (1,'CC','1002003001','Carlos','Martínez','carlos@gmail.com','3001112233'),(2,'CC','1002003002','Laura','Gómez','laura@gmail.com','3002223344');
/*!40000 ALTER TABLE `CLIENTE` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `HABITACION`
--

DROP TABLE IF EXISTS `HABITACION`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `HABITACION` (
  `ID_HABITACION` int NOT NULL AUTO_INCREMENT,
  `ID_HOTEL` int NOT NULL,
  `ID_TIPO` int NOT NULL,
  `NUMERO` varchar(10) NOT NULL,
  `PISO` int DEFAULT NULL,
  `ESTADO` enum('DISPONIBLE','OCUPADA','MANTENIMIENTO','BLOQUEADA') NOT NULL DEFAULT 'DISPONIBLE',
  PRIMARY KEY (`ID_HABITACION`),
  UNIQUE KEY `UQ_HABITACION_HOTEL_NUMERO` (`ID_HOTEL`,`NUMERO`),
  KEY `FK_HABITACION_TIPO` (`ID_TIPO`),
  CONSTRAINT `FK_HABITACION_HOTEL` FOREIGN KEY (`ID_HOTEL`) REFERENCES `HOTEL` (`ID_HOTEL`),
  CONSTRAINT `FK_HABITACION_TIPO` FOREIGN KEY (`ID_TIPO`) REFERENCES `TIPO_HABITACION` (`ID_TIPO`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `HABITACION`
--

LOCK TABLES `HABITACION` WRITE;
/*!40000 ALTER TABLE `HABITACION` DISABLE KEYS */;
INSERT INTO `HABITACION` VALUES (1,1,1,'101',1,'DISPONIBLE'),(2,1,2,'102',1,'OCUPADA'),(3,2,3,'201',2,'DISPONIBLE');
/*!40000 ALTER TABLE `HABITACION` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `HOTEL`
--

DROP TABLE IF EXISTS `HOTEL`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `HOTEL` (
  `ID_HOTEL` int NOT NULL AUTO_INCREMENT,
  `NOMBRE` varchar(120) NOT NULL,
  `DIRECCION` varchar(200) DEFAULT NULL,
  `CIUDAD` varchar(100) DEFAULT NULL,
  `CATEGORIA` tinyint DEFAULT NULL,
  `ESTADO` enum('ACTIVO','INACTIVO') NOT NULL DEFAULT 'ACTIVO',
  PRIMARY KEY (`ID_HOTEL`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `HOTEL`
--

LOCK TABLES `HOTEL` WRITE;
/*!40000 ALTER TABLE `HOTEL` DISABLE KEYS */;
INSERT INTO `HOTEL` VALUES (1,'Hotel Sol Caribe','Calle 10 #15-20','Cartagena',5,'ACTIVO'),(2,'Hotel Playa Blanca','Carrera 45 #23-11','Santa Marta',4,'ACTIVO');
/*!40000 ALTER TABLE `HOTEL` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `PAGO`
--

DROP TABLE IF EXISTS `PAGO`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `PAGO` (
  `ID_PAGO` int NOT NULL AUTO_INCREMENT,
  `ID_RESERVA` int NOT NULL,
  `FECHA_PAGO` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `METODO` enum('EFECTIVO','TARJETA','TRANSFERENCIA','PSE','OTRO') NOT NULL,
  `MONTO` decimal(10,2) NOT NULL,
  `REFERENCIA` varchar(60) DEFAULT NULL,
  PRIMARY KEY (`ID_PAGO`),
  UNIQUE KEY `UQ_PAGO_RESERVA` (`ID_RESERVA`),
  CONSTRAINT `FK_PAGO_RESERVA` FOREIGN KEY (`ID_RESERVA`) REFERENCES `RESERVA` (`ID_RESERVA`) ON DELETE CASCADE,
  CONSTRAINT `CHK_PAGO_MONTO` CHECK ((`MONTO` >= 0))
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `PAGO`
--

LOCK TABLES `PAGO` WRITE;
/*!40000 ALTER TABLE `PAGO` DISABLE KEYS */;
INSERT INTO `PAGO` VALUES (1,1,'2025-09-03 22:31:18','TARJETA',600000.00,'TRX12345');
/*!40000 ALTER TABLE `PAGO` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `RESERVA`
--

DROP TABLE IF EXISTS `RESERVA`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `RESERVA` (
  `ID_RESERVA` int NOT NULL AUTO_INCREMENT,
  `ID_CLIENTE` int NOT NULL,
  `ID_HABITACION` int NOT NULL,
  `FECHA_INICIO` date NOT NULL,
  `FECHA_FIN` date NOT NULL,
  `ADULTOS` tinyint NOT NULL DEFAULT '1',
  `NINOS` tinyint NOT NULL DEFAULT '0',
  `ESTADO` enum('PENDIENTE','CONFIRMADA','CANCELADA','CHECKIN','CHECKOUT','NO_SHOW') NOT NULL DEFAULT 'PENDIENTE',
  `TARIFA_APLICADA` decimal(10,2) NOT NULL,
  `MONEDA` char(3) NOT NULL DEFAULT 'COP',
  `FECHA_CREACION` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID_RESERVA`),
  KEY `FK_RESERVA_CLIENTE` (`ID_CLIENTE`),
  KEY `FK_RESERVA_HABITACION` (`ID_HABITACION`),
  CONSTRAINT `FK_RESERVA_CLIENTE` FOREIGN KEY (`ID_CLIENTE`) REFERENCES `CLIENTE` (`ID_CLIENTE`),
  CONSTRAINT `FK_RESERVA_HABITACION` FOREIGN KEY (`ID_HABITACION`) REFERENCES `HABITACION` (`ID_HABITACION`),
  CONSTRAINT `CHK_RESERVA_ADULTOS` CHECK ((`ADULTOS` >= 1)),
  CONSTRAINT `CHK_RESERVA_NINOS` CHECK ((`NINOS` >= 0)),
  CONSTRAINT `CHK_RESERVA_RANGO` CHECK ((`FECHA_FIN` > `FECHA_INICIO`))
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `RESERVA`
--

LOCK TABLES `RESERVA` WRITE;
/*!40000 ALTER TABLE `RESERVA` DISABLE KEYS */;
INSERT INTO `RESERVA` VALUES (1,1,1,'2025-09-10','2025-09-15',1,0,'CONFIRMADA',120000.00,'COP','2025-09-03 22:31:18'),(2,2,3,'2025-10-01','2025-10-07',2,1,'PENDIENTE',400000.00,'COP','2025-09-03 22:31:18');
/*!40000 ALTER TABLE `RESERVA` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `RESERVA_SERVICIO`
--

DROP TABLE IF EXISTS `RESERVA_SERVICIO`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `RESERVA_SERVICIO` (
  `ID_RESERVA` int NOT NULL,
  `ID_SERVICIO` int NOT NULL,
  `CANTIDAD` int NOT NULL DEFAULT '1',
  `PRECIO_UNITARIO` decimal(10,2) NOT NULL,
  PRIMARY KEY (`ID_RESERVA`,`ID_SERVICIO`),
  KEY `FK_RS_SERVICIO` (`ID_SERVICIO`),
  CONSTRAINT `FK_RS_RESERVA` FOREIGN KEY (`ID_RESERVA`) REFERENCES `RESERVA` (`ID_RESERVA`) ON DELETE CASCADE,
  CONSTRAINT `FK_RS_SERVICIO` FOREIGN KEY (`ID_SERVICIO`) REFERENCES `SERVICIO` (`ID_SERVICIO`),
  CONSTRAINT `CHK_RS_CANTIDAD` CHECK ((`CANTIDAD` >= 1)),
  CONSTRAINT `CHK_RS_PRECIO` CHECK ((`PRECIO_UNITARIO` >= 0))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `RESERVA_SERVICIO`
--

LOCK TABLES `RESERVA_SERVICIO` WRITE;
/*!40000 ALTER TABLE `RESERVA_SERVICIO` DISABLE KEYS */;
INSERT INTO `RESERVA_SERVICIO` VALUES (1,1,2,30000.00),(1,2,1,150000.00);
/*!40000 ALTER TABLE `RESERVA_SERVICIO` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `SERVICIO`
--

DROP TABLE IF EXISTS `SERVICIO`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `SERVICIO` (
  `ID_SERVICIO` int NOT NULL AUTO_INCREMENT,
  `NOMBRE` varchar(80) NOT NULL,
  `DESCRIPCION` varchar(200) DEFAULT NULL,
  `PRECIO_UNITARIO` decimal(10,2) NOT NULL,
  `TIPO` enum('ALOJAMIENTO','ALIMENTO','TRANSPORTE','SPA','TOUR','OTRO') NOT NULL DEFAULT 'OTRO',
  `ACTIVO` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`ID_SERVICIO`),
  CONSTRAINT `CHK_SERVICIO_PRECIO` CHECK ((`PRECIO_UNITARIO` >= 0))
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `SERVICIO`
--

LOCK TABLES `SERVICIO` WRITE;
/*!40000 ALTER TABLE `SERVICIO` DISABLE KEYS */;
INSERT INTO `SERVICIO` VALUES (1,'Desayuno Buffet','Desayuno completo incluido',30000.00,'ALIMENTO',1),(2,'Spa Relax','Sesión de spa de 1 hora',150000.00,'SPA',1);
/*!40000 ALTER TABLE `SERVICIO` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `TARIFA`
--

DROP TABLE IF EXISTS `TARIFA`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `TARIFA` (
  `ID_TARIFA` int NOT NULL AUTO_INCREMENT,
  `ID_TIPO` int NOT NULL,
  `ID_TEMPORADA` int NOT NULL,
  `PRECIO_FINAL` decimal(10,2) NOT NULL,
  PRIMARY KEY (`ID_TARIFA`),
  UNIQUE KEY `UQ_TARIFA_TIPO_TEMPORADA` (`ID_TIPO`,`ID_TEMPORADA`),
  KEY `FK_TARIFA_TEMPORADA` (`ID_TEMPORADA`),
  CONSTRAINT `FK_TARIFA_TEMPORADA` FOREIGN KEY (`ID_TEMPORADA`) REFERENCES `TEMPORADA` (`ID_TEMPORADA`),
  CONSTRAINT `FK_TARIFA_TIPO` FOREIGN KEY (`ID_TIPO`) REFERENCES `TIPO_HABITACION` (`ID_TIPO`),
  CONSTRAINT `CHK_TARIFA_PRECIO` CHECK ((`PRECIO_FINAL` >= 0))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `TARIFA`
--

LOCK TABLES `TARIFA` WRITE;
/*!40000 ALTER TABLE `TARIFA` DISABLE KEYS */;
/*!40000 ALTER TABLE `TARIFA` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `TEMPORADA`
--

DROP TABLE IF EXISTS `TEMPORADA`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `TEMPORADA` (
  `ID_TEMPORADA` int NOT NULL AUTO_INCREMENT,
  `NOMBRE` varchar(60) NOT NULL,
  `FECHA_INICIO` date NOT NULL,
  `FECHA_FIN` date NOT NULL,
  `INCREMENTO_PORCENTUAL` decimal(5,2) NOT NULL DEFAULT '0.00',
  PRIMARY KEY (`ID_TEMPORADA`),
  CONSTRAINT `CHK_TEMPORADA_RANGO` CHECK ((`FECHA_FIN` >= `FECHA_INICIO`))
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `TEMPORADA`
--

LOCK TABLES `TEMPORADA` WRITE;
/*!40000 ALTER TABLE `TEMPORADA` DISABLE KEYS */;
INSERT INTO `TEMPORADA` VALUES (1,'Alta','2025-06-01','2025-08-31',20.00),(2,'Baja','2025-09-01','2025-11-30',0.00);
/*!40000 ALTER TABLE `TEMPORADA` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `TIPO_HABITACION`
--

DROP TABLE IF EXISTS `TIPO_HABITACION`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `TIPO_HABITACION` (
  `ID_TIPO` int NOT NULL AUTO_INCREMENT,
  `NOMBRE` varchar(60) NOT NULL,
  `DESCRIPCION` varchar(200) DEFAULT NULL,
  `CAPACIDAD` tinyint NOT NULL,
  `PRECIO_BASE` decimal(10,2) NOT NULL,
  PRIMARY KEY (`ID_TIPO`),
  CONSTRAINT `CHK_TIPO_CAPACIDAD` CHECK ((`CAPACIDAD` >= 1)),
  CONSTRAINT `CHK_TIPO_PRECIO` CHECK ((`PRECIO_BASE` >= 0))
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `TIPO_HABITACION`
--

LOCK TABLES `TIPO_HABITACION` WRITE;
/*!40000 ALTER TABLE `TIPO_HABITACION` DISABLE KEYS */;
INSERT INTO `TIPO_HABITACION` VALUES (1,'Sencilla','Habitación sencilla con cama individual',1,120000.00),(2,'Doble','Habitación doble con dos camas',2,200000.00),(3,'Suite','Suite de lujo con vista al mar',3,400000.00);
/*!40000 ALTER TABLE `TIPO_HABITACION` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2025-09-03 22:33:35
